# ComfyUI Save Image with Watermark ğŸ’§

é€ã‹ã—ï¼ˆã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒ¼ã‚¯ï¼‰æ©Ÿèƒ½ä»˜ãç”»åƒä¿å­˜ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒ‰

## æ©Ÿèƒ½

### å¯è¦–é€ã‹ã—
- **ãƒ†ã‚­ã‚¹ãƒˆé€ã‹ã—**: ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚­ã‚¹ãƒˆã€ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã€è‰²ã€é€æ˜åº¦ã€ä½ç½®ã‚’æŒ‡å®šå¯èƒ½
- **ç”»åƒé€ã‹ã—**: ãƒ­ã‚´ç”»åƒã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
- **ã‚¿ã‚¤ãƒ«é€ã‹ã—**: ç”»åƒå…¨ä½“ã«ç¹°ã‚Šè¿”ã—ãƒ‘ã‚¿ãƒ¼ãƒ³ã§é…ç½®

### ä¸å¯è¦–é€ã‹ã—ï¼ˆã‚¹ãƒ†ã‚¬ãƒã‚°ãƒ©ãƒ•ã‚£ï¼‰
- **LSBåŸ‹ã‚è¾¼ã¿**: ç”»åƒã®æœ€ä¸‹ä½ãƒ“ãƒƒãƒˆã«éš ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åŸ‹ã‚è¾¼ã¿
- **æŠ½å‡ºãƒãƒ¼ãƒ‰**: åŸ‹ã‚è¾¼ã¾ã‚ŒãŸéš ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ½å‡º

### ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»æ¥æ­´
- **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒƒã‚·ãƒ¥**: SHA-256ãƒãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆï¼ˆãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³æ¥æ­´è¨˜éŒ²ç”¨ï¼‰
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿**: PNG Infoã«ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ComfyUI ManagerçµŒç”±
1. ComfyUI Managerã‚’é–‹ã
2. "Install Custom Nodes"ã‚’é¸æŠ
3. "comfyui-save-image-watermark"ã‚’æ¤œç´¢
4. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
cd ComfyUI/custom_nodes
git clone https://github.com/aicuai/comfyui-save-image-watermark.git
```

## ä½¿ã„æ–¹

### Save Image (Watermark) ğŸ’§

1. ãƒãƒ¼ãƒ‰ãƒ–ãƒ©ã‚¦ã‚¶ã§ "Save Image (Watermark)" ã‚’æ¤œç´¢
2. ç”»åƒç”Ÿæˆãƒãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’æ¥ç¶š
3. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š:
   - `prefix`: ãƒ•ã‚¡ã‚¤ãƒ«åãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
   - `file_format`: PNG/JPEG/WEBP
   - `watermark_text`: é€ã‹ã—ãƒ†ã‚­ã‚¹ãƒˆï¼ˆä¾‹: "Â© AICU"ï¼‰
   - `watermark_position`: ä½ç½®ï¼ˆbottom_right, center, tileç­‰ï¼‰
   - `watermark_opacity`: é€æ˜åº¦ï¼ˆ0.0ã€œ1.0ï¼‰
   - `invisible_watermark`: éš ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### Extract Hidden Watermark ğŸ”

1. "Extract Hidden Watermark"ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ 
2. é€ã‹ã—ä»˜ãç”»åƒã‚’å…¥åŠ›
3. éš ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚Œã‚‹

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è©³ç´°

### ãƒ†ã‚­ã‚¹ãƒˆé€ã‹ã—
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|-----------|------|-----------|
| watermark_text | é€ã‹ã—ãƒ†ã‚­ã‚¹ãƒˆ | "Â© AICU" |
| watermark_enabled | æœ‰åŠ¹/ç„¡åŠ¹ | True |
| watermark_position | ä½ç½® | bottom_right |
| watermark_opacity | é€æ˜åº¦ | 0.3 |
| watermark_font_size | ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º | 24 |
| watermark_color | è‰²ï¼ˆ16é€²æ•°ï¼‰ | #FFFFFF |

### ä½ç½®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `bottom_right`: å³ä¸‹
- `bottom_left`: å·¦ä¸‹
- `top_right`: å³ä¸Š
- `top_left`: å·¦ä¸Š
- `center`: ä¸­å¤®
- `tile`: ã‚¿ã‚¤ãƒ«çŠ¶ã«ç¹°ã‚Šè¿”ã—

### ä¸å¯è¦–é€ã‹ã—
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|-----------|------|-----------|
| invisible_watermark | éš ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | "" |
| invisible_watermark_enabled | æœ‰åŠ¹/ç„¡åŠ¹ | False |

### å“è³ªè¨­å®š
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|-----------|------|-----------|
| jpeg_quality | JPEGå“è³ª | 95 |
| webp_quality | WebPå“è³ª | 90 |

## å‡ºåŠ›

- **filename**: ä¿å­˜ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«å
- **content_hash**: SHA-256ãƒãƒƒã‚·ãƒ¥å€¤ï¼ˆæ¥æ­´è¨˜éŒ²ç”¨ï¼‰

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### è‘—ä½œæ¨©ä¿è­·
```
watermark_text = "Â© 2026 AICU Japan"
watermark_position = "bottom_right"
watermark_opacity = 0.3
```

### æ¥æ­´è¨˜éŒ²ï¼ˆãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³é€£æºï¼‰
```
invisible_watermark = "creator:user123|date:2024-12-14|id:abc123"
invisible_watermark_enabled = True
embed_metadata = True
```

### AIç”Ÿæˆè¨¼æ˜
```
watermark_text = "AI Generated by AICU"
invisible_watermark = '{"model":"mellow_pencil","seed":12345}'
```

## æŠ€è¡“ä»•æ§˜

### ä¸å¯è¦–é€ã‹ã—ï¼ˆLSBï¼‰
- å„ãƒ”ã‚¯ã‚»ãƒ«ã®RGBå€¤ã®æœ€ä¸‹ä½ãƒ“ãƒƒãƒˆï¼ˆLSBï¼‰ã‚’ä½¿ç”¨
- çµ‚ç«¯ãƒãƒ¼ã‚«ãƒ¼: 4ã¤ã®é€£ç¶šã—ãŸNULLãƒã‚¤ãƒˆ
- æœ€å¤§åŸ‹ã‚è¾¼ã¿å®¹é‡: ç”»åƒã‚µã‚¤ã‚º(bytes) / 8 æ–‡å­—

### ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒƒã‚·ãƒ¥
- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ : SHA-256
- å…¥åŠ›: PNGå½¢å¼ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒãƒã‚¤ãƒˆåˆ—
- å‡ºåŠ›: 64æ–‡å­—ã®16é€²æ•°æ–‡å­—åˆ—

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Apache License 2.0

## é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- [ComfyUI Master Guide](https://j.aicu.ai/comfysb)
- [comfyui-save-image-local](https://github.com/yhayano-ponotech/comfyui-save-image-local) - ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ä¿å­˜ãƒãƒ¼ãƒ‰
- [C2PA](https://c2pa.org/) - Content Credentialsæ¨™æº–

## è²¢çŒ®

Issueã€Pull Requestã‚’æ­“è¿ã—ã¾ã™ã€‚

## ä½œè€…

AICU Japan K. K.
- Web: https://aicu.jp
- GitHub: https://github.com/aicuai
